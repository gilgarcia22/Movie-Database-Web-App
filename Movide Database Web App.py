# -*- coding: utf-8 -*-
"""20211217_Final Group Project_MoviesAPI.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1_CffWgeqqA_HjHrF1wdC4Z81C0Jlc_dS

# Flask
"""

!pip install flask-ngrok # install required library.

from flask_ngrok import run_with_ngrok
from flask import Flask

from google.colab.output import eval_js
print("Below is your URL")
print(eval_js("google.colab.kernel.proxyPort(5000)")) # generate proxy port (do this everytime)

# Commented out IPython magic to ensure Python compatibility.
#Make the template.
# %mkdir templates -p

"""## Images"""

# Commented out IPython magic to ensure Python compatibility.
# %mkdir static/img/ -p

"""### Star Img"""

# Commented out IPython magic to ensure Python compatibility.
# %%writefile static/img/star.svg
# 
# <svg width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg">
# <path d="M7.71984 0.450598C7.84892 0.24299 8.15108 0.242989 8.28016 0.450598L10.6095 4.19696C10.6549 4.27 10.727 4.32242 10.8105 4.34304L15.0933 5.40066C15.3307 5.45927 15.424 5.74664 15.2665 5.93355L12.4233 9.30655C12.3678 9.37231 12.3403 9.45713 12.3465 9.54292L12.6641 13.9429C12.6817 14.1868 12.4372 14.3644 12.2108 14.2723L8.12427 12.6105C8.04459 12.5781 7.95541 12.5781 7.87573 12.6105L3.78923 14.2723C3.56277 14.3644 3.31832 14.1868 3.33592 13.9429L3.65352 9.54292C3.65972 9.45713 3.63216 9.37231 3.57672 9.30655L0.733518 5.93356C0.575958 5.74664 0.66933 5.45927 0.906666 5.40066L5.18946 4.34304C5.27297 4.32242 5.34512 4.27 5.39053 4.19696L7.71984 0.450598Z" fill="#ECC53C"/>
# </svg>
# 
# 
#

"""### Clock Img"""

# Commented out IPython magic to ensure Python compatibility.
# %%writefile static/img/clock.svg
# 
# <svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
# <path d="M6.5 13C10.0559 13 13 10.0495 13 6.5C13 2.94412 10.0495 0 6.49363 0C2.94412 0 0 2.94412 0 6.5C0 10.0495 2.95049 13 6.5 13ZM6.5 11.9167C3.49216 11.9167 1.08971 9.50784 1.08971 6.5C1.08971 3.49216 3.48578 1.08333 6.49363 1.08333C9.50147 1.08333 11.9103 3.49216 11.9167 6.5C11.923 9.50784 9.50784 11.9167 6.5 11.9167ZM3.16716 7.18824H6.49363C6.74216 7.18824 6.93971 6.99706 6.93971 6.74216V2.44706C6.93971 2.19853 6.74216 2.00735 6.49363 2.00735C6.2451 2.00735 6.05392 2.19853 6.05392 2.44706V6.30245H3.16716C2.91226 6.30245 2.72108 6.49363 2.72108 6.74216C2.72108 6.99706 2.91226 7.18824 3.16716 7.18824Z" fill="white"/>
# </svg>
#

"""### Question img"""

# Commented out IPython magic to ensure Python compatibility.
# %%writefile static/img/quest.svg
# 
# <svg xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" width="844.67538" height="595.26155" viewBox="0 0 844.67538 595.26155" xmlns:xlink="http://www.w3.org/1999/xlink"><circle cx="431.39281" cy="548" r="46" fill="#ffffff"/><path d="M883.86176,743.78487c25.7345-7.72868,53.09381-15.78786,73.50313-34.161,18.23763-16.41813,30.55024-41.48912,22.99475-66.1115-7.54-24.57187-30.12421-40.95629-53.44165-49.10532-13.225-4.62188-27.06087-7.18608-40.89147-9.20037-15.03485-2.18967-30.13615-3.98373-45.23026-5.71012q-91.67724-10.48563-184.04386-12.811c-30.38456-.76525-60.76358-.74682-91.15243-.3057-27.13937.394-55.72215.38417-80.899-11.15051-19.57846-8.96979-37.348-25.28881-42.8033-46.73352-6.29728-24.75467,5.318-49.96382,21.97993-67.892,8.78265-9.45011,19.04731-17.40385,29.63621-24.71743,11.4874-7.93416,23.37539-15.30643,35.52084-22.18813a494.63414,494.63414,0,0,1,74.7667-34.4685c12.74555-4.63445,25.68047-8.63281,38.72759-12.32143,11.017-3.11469,22.06832-6.23382,32.71588-10.47748,20.58349-8.20371,40.161-22.09985,45.39464-44.88142,4.96024-21.59145-3.40305-45.03067-18.065-61.07057-16.96282-18.557-42.53949-26.69181-67.06007-28.008-27.52842-1.47765-54.42246,5.412-80.29678,14.15585-27.59673,9.326-54.59854,20.04924-82.77827,27.60322a556.95783,556.95783,0,0,1-85.19574,15.83655c-14.08227,1.49951-28.59019,3.19273-42.75626,2.04475-11.87246-.96211-23.68426-4.45375-32.43408-12.87964-7.50252-7.22477-11.97184-17.154-10.4353-27.63238.27909-1.90318,3.17022-1.09407,2.89284.79752-1.8704,12.75513,6.79991,24.50863,17.48415,30.5293,12.34817,6.95832,27.37408,6.9678,41.1218,6.172a537.82528,537.82528,0,0,0,88.51452-12.79561c28.59252-6.53059,56.16382-15.86633,83.70391-25.83908,26.15594-9.47153,52.89665-18.71579,80.84009-20.76729,24.24611-1.78007,49.75165,1.75222,70.87426,14.42313,18.56387,11.136,32.21482,29.70722,36.56451,51.01813,4.25044,20.82462-1.63632,41.785-17.4,56.31714-16.32147,15.04633-38.7007,21.47909-59.55655,27.40368-26.45223,7.51437-52.33726,16.29809-77.39248,27.7031a485.82354,485.82354,0,0,0-72.8001,40.92805c-22.24625,15.20228-44.2007,34.33058-51.23658,61.45126-3.27739,12.63313-2.67227,26.03212,2.8116,37.96461,4.87605,10.60993,12.90656,19.53469,22.26169,26.41853,22.32074,16.42443,50.45266,19.79665,77.41421,20.13212,30.28143.37678,60.56382-.64518,90.85508-.148q92.5988,1.51977,184.81863,11.27265,23.108,2.44594,46.15759,5.40711c13.82158,1.776,27.68967,3.54058,41.27849,6.69464,24.16222,5.60822,47.67389,16.39167,62.69178,36.878a61.31938,61.31938,0,0,1,11.94709,30.44593c1.05134,11.52384-1.76985,23.0693-6.98016,33.32083-11.53233,22.69042-33.13363,37.12286-56.07337,46.60471-12.28683,5.0786-25.03167,8.926-37.7516,12.74609-1.853.55651-2.64487-2.338-.79752-2.89283Z" transform="translate(-177.66231 -152.36922)" fill="#f2f2f2"/><circle cx="125.89281" cy="69.5" r="24" fill="#f2f2f2"/><circle cx="292.39281" cy="115" r="24" fill="#f2f2f2"/><circle cx="433.39281" cy="24" r="24" fill="#f2f2f2"/><circle cx="521.39281" cy="126" r="24" fill="#f2f2f2"/><circle cx="402.39281" cy="244" r="24" fill="#f2f2f2"/><circle cx="251.39281" cy="301" r="24" fill="#f2f2f2"/><circle cx="411.39281" cy="390" r="24" fill="#f2f2f2"/><circle cx="583.39281" cy="440" r="24" fill="#f2f2f2"/><circle cx="784.39281" cy="429" r="24" fill="#f2f2f2"/><path d="M604.12763,220.37264c-71.89185.50782-130.75611,58.92987-131.77735,130.81635-.00946.66369-.01381,5.33048-.01324,11.43422a33.74778,33.74778,0,0,0,33.74387,33.746h.00007a33.76855,33.76855,0,0,0,33.76114-33.79775c-.00343-4.15211-.00551-7.02584-.00551-7.20227a64.00037,64.00037,0,1,1,98.52027,53.8794l.01171.01422s-48.02832,30.91956-62.67089,73.33545l.01245.003a94.00389,94.00389,0,0,0-3.87354,26.76794c0,3.72538.21916,36.32138.64261,62.77767a34.78649,34.78649,0,0,0,34.79009,34.22233h.00007a34.79588,34.79588,0,0,0,34.79384-35.01061c-.14706-24.22912-.22661-52.44168-.22661-54.48939,0-26.04473,25.12525-51.99475,45.76367-68.91741,23.76587-19.48694,40.86792-46.04291,47.73706-75.99909a86.7618,86.7618,0,0,0,2.49927-18.8335A132.75,132.75,0,0,0,604.12763,220.37264Z" transform="translate(-177.66231 -152.36922)" fill="#ffffff"/><path d="M1021.147,747.63078H178.853a1.19069,1.19069,0,0,1,0-2.38137h842.294a1.19068,1.19068,0,0,1,0,2.38137Z" transform="translate(-177.66231 -152.36922)" fill="#3f3d56"/><circle cx="628.44885" cy="242.9959" r="30" fill="#2f2e41"/><polygon points="573.012 582.129 560.753 582.129 554.92 534.841 573.015 534.841 573.012 582.129" fill="#a0616a"/><path d="M551.99554,578.62562h23.64387a0,0,0,0,1,0,0v14.88687a0,0,0,0,1,0,0H537.10868a0,0,0,0,1,0,0v0A14.88686,14.88686,0,0,1,551.99554,578.62562Z" fill="#2f2e41"/><polygon points="668.012 582.129 655.753 582.129 649.92 534.841 668.015 534.841 668.012 582.129" fill="#a0616a"/><path d="M646.99554,578.62562h23.64387a0,0,0,0,1,0,0v14.88687a0,0,0,0,1,0,0H632.10868a0,0,0,0,1,0,0v0A14.88686,14.88686,0,0,1,646.99554,578.62562Z" fill="#2f2e41"/><circle cx="623.88979" cy="248.61007" r="24.56103" fill="#a0616a"/><path d="M816.19123,504.7751l10.98975-25.25a31.38253,31.38253,0,0,0-6.94971-35.6,31.87322,31.87322,0,0,0-3.07031-2.67,30.93522,30.93522,0,0,0-18.98975-6.57,32.179,32.179,0,0,0-13.3999,2.98c-.36035.16-.71.33-1.07031.5-.68994.33-1.36963.69-2.02979,1.06a31.67823,31.67823,0,0,0-15.70019,23.88l-4.8501,40.64c-1.21973,3.19-44.73975,118.39-29.51953,206.34a4.46692,4.46692,0,0,0,3.81982,3.67l15.43018,2.1a4.49661,4.49661,0,0,0,5.00976-3.53l25.89014-123.41a3.50323,3.50323,0,0,1,6.79981-.23l36.58007,129.78a4.47129,4.47129,0,0,0,4.31006,3.28,5.12184,5.12184,0,0,0,.87012-.08l18.84961-3.63a4.471,4.471,0,0,0,3.63037-4.81C850.02131,682.3351,835.3011,527.60512,816.19123,504.7751Z" transform="translate(-177.66231 -152.36922)" fill="#2f2e41"/><path d="M706.10166,421.41909A10.05576,10.05576,0,0,0,716.696,432.6225l13.72894,32.99236,10.385-15.3943-14.62937-28.97a10.11027,10.11027,0,0,0-20.07892.16852Z" transform="translate(-177.66231 -152.36922)" fill="#a0616a"/><path d="M800.19025,537.99553a10.05577,10.05577,0,0,0,8.42651-12.91316l28.88533-21.03846-17.39036-6.51224-24.76387,20.97687a10.11028,10.11028,0,0,0,4.84239,19.487Z" transform="translate(-177.66231 -152.36922)" fill="#a0616a"/><path d="M753.10188,487.61024a17.05692,17.05692,0,0,1-3.29834-.32519,16.30539,16.30539,0,0,1-11.94751-9.61621l-19.23438-23.45313a4.50075,4.50075,0,0,1,1.11109-6.68066l13.68432-8.4707a4.50007,4.50007,0,0,1,6.21533,1.49023l13.5564,22.334L779.15022,443.702A9.72146,9.72146,0,0,1,790.46,459.26356l-25.91186,23.63672A16.25271,16.25271,0,0,1,753.10188,487.61024Z" transform="translate(-177.66231 -152.36922)" fill="#2f2e41"/><path d="M823.252,522.8827c-.03515,0-.07055,0-.10571-.001a4.50783,4.50783,0,0,1-3.31079-1.57031l-12.16626-14.19336a4.49979,4.49979,0,0,1,.92041-6.67286l22.78149-15.1875-20.63842-24.8125a9.721,9.721,0,0,1,14.8872-12.18261l25.0835,24.51269a16.52481,16.52481,0,0,1-3.67529,26.94043l-20.50122,21.75391A4.50742,4.50742,0,0,1,823.252,522.8827Z" transform="translate(-177.66231 -152.36922)" fill="#2f2e41"/><path d="M795.30707,470.58358a4.63212,4.63212,0,0,1-.584-.03711,4.46111,4.46111,0,0,1-3.71045-3.06885l-9.14234-28.02929a3.08255,3.08255,0,0,1,1.594-3.72461l.29663-.14014c.269-.12793.5354-.25439.80737-.37549a32.57412,32.57412,0,0,1,13.603-3.023,31.327,31.327,0,0,1,17.16138,5.15674,3.13007,3.13007,0,0,1,.90136,4.29443L799.08393,468.504A4.45513,4.45513,0,0,1,795.30707,470.58358Z" transform="translate(-177.66231 -152.36922)" fill="#e6e6e6"/><circle cx="652.1011" cy="219.78616" r="9.81668" fill="#2f2e41"/><path d="M796.11115,361.36513h0a26,26,0,0,0-26,25.99994v11.00006h13.5293l6.4707-11,1.94141,11h41.05859l-11-11.00006A26,26,0,0,0,796.11115,361.36513Z" transform="translate(-177.66231 -152.36922)" fill="#2f2e41"/><path d="M834.80883,365.43121a15.15,15.15,0,0,1,16.48081-10.39558c6.256,1.04586,11.20228,6.07455,14.14944,11.69107s4.30806,11.90252,6.28935,17.92793,4.79124,12.08362,9.79306,15.984,12.67721,4.9584,17.58966.94607a20.11809,20.11809,0,0,1-37.47706,7.18124c-2.59206-4.61172-3.26121-10.01684-4.02988-15.251s-1.7674-10.6498-4.86211-14.94043-8.88772-7.09293-13.80374-5.13859Z" transform="translate(-177.66231 -152.36922)" fill="#2f2e41"/><path d="M515.60883,380.40755h0a33.748,33.748,0,0,1-33.74414-33.746c-.00049-6.10376.0039-10.77051.01318-11.4342a131.50724,131.50724,0,0,1,15.35889-59.90875,131.80321,131.80321,0,0,0-25.35889,75.90875c-.00928.66369-.01367,5.33044-.01318,11.4342a33.748,33.748,0,0,0,33.74414,33.746h0A33.77281,33.77281,0,0,0,538.09662,371.817,33.62247,33.62247,0,0,1,515.60883,380.40755Z" transform="translate(-177.66231 -152.36922)" fill="#3f3d56"/><path d="M606.415,291.47848a64.00385,64.00385,0,0,1,55.65918,89.413,63.9972,63.9972,0,1,0-107.42578-66.98523A63.87073,63.87073,0,0,1,606.415,291.47848Z" transform="translate(-177.66231 -152.36922)" fill="#3f3d56"/><path d="M616.79682,590.40755h0a34.78682,34.78682,0,0,1-34.79-34.22235c-.42334-26.45629-.64258-59.0523-.64258-62.77765a94.00389,94.00389,0,0,1,3.87354-26.76794l-.01221-.003a95.069,95.069,0,0,1,5.49414-12.70087,110.04745,110.04745,0,0,0-15.49414,28.70087l.01221.003a94.00389,94.00389,0,0,0-3.87354,26.76794c0,3.72535.21924,36.32136.64258,62.77765a34.78682,34.78682,0,0,0,34.79,34.22235h0a34.80287,34.80287,0,0,0,33.40185-25.04846A34.66005,34.66005,0,0,1,616.79682,590.40755Z" transform="translate(-177.66231 -152.36922)" fill="#3f3d56"/><polygon points="126.541 582.585 138.8 582.584 144.633 535.296 126.538 535.297 126.541 582.585" fill="#ffb8b8"/><path d="M301.576,731.45065H340.1067a0,0,0,0,1,0,0v14.88687a0,0,0,0,1,0,0H316.46283A14.88686,14.88686,0,0,1,301.576,731.45066v0A0,0,0,0,1,301.576,731.45065Z" transform="translate(464.05409 1325.40429) rotate(179.99738)" fill="#2f2e41"/><polygon points="82.541 582.585 94.8 582.584 100.633 535.296 82.538 535.297 82.541 582.585" fill="#ffb8b8"/><path d="M257.576,731.45065H296.1067a0,0,0,0,1,0,0v14.88687a0,0,0,0,1,0,0H272.46283A14.88686,14.88686,0,0,1,257.576,731.45066v0A0,0,0,0,1,257.576,731.45065Z" transform="translate(376.05409 1325.4063) rotate(179.99738)" fill="#2f2e41"/><path d="M270.91659,720.41068l-11.975-.62988a4.6735,4.6735,0,0,1-4.41851-4.967l14.31268-158.46594,65.911,17.78562,6.35023-1.73241L321.23868,712.68583a4.69622,4.69622,0,0,1-4.35816,3.94458l-12.9089.60147a4.67413,4.67413,0,0,1-4.93149-4.79557l2.339-84.19641a1.55813,1.55813,0,0,0-3.0832-.36007L275.739,716.69228a4.64568,4.64568,0,0,1-4.56913,3.7255C271.086,720.41778,271.00154,720.41575,270.91659,720.41068Z" transform="translate(-177.66231 -152.36922)" fill="#2f2e41"/><circle cx="128.74202" cy="249.75879" r="24.56103" fill="#ffb8b8"/><path d="M265.51193,474.28693l2.70056,58.26748.97625,21.19852a4.64221,4.64221,0,0,0,3.07432,4.17534l63.336,22.94342a4.47742,4.47742,0,0,0,1.59954.28045,4.64358,4.64358,0,0,0,4.66371-4.7881L339.2657,471.5969A36.93044,36.93044,0,0,0,308.522,435.91974c-.61263-.09345-1.23592-.18695-1.8592-.27006a36.24947,36.24947,0,0,0-29.165,9.44122,37.23612,37.23612,0,0,0-11.9859,29.196Z" transform="translate(-177.66231 -152.36922)" fill="#ccc"/><path d="M365.85452,569.24512a10.06355,10.06355,0,0,1-5.36877-15.22659l-21.478-28.56,18.53424-1.14707,17.55439,27.29693a10.111,10.111,0,0,1-9.24184,17.63673Z" transform="translate(-177.66231 -152.36922)" fill="#ffb8b8"/><path d="M350.75332,548.85022a4.64437,4.64437,0,0,1-2.54106-2.51848L315.854,469.2374a12.4634,12.4634,0,1,1,22.98438-9.64693l32.3582,77.09534a4.679,4.679,0,0,1-2.50048,6.11822l-14.36542,6.029a4.64165,4.64165,0,0,1-3.57741.01724Z" transform="translate(-177.66231 -152.36922)" fill="#ccc"/><path d="M298.50776,546.13086,329.587,486.62205a4.87826,4.87826,0,0,1,6.57494-2.06344l45.11152,23.5601a4.87826,4.87826,0,0,1,2.06343,6.57494l-31.07927,59.50881a4.87827,4.87827,0,0,1-6.57494,2.06344L300.5712,552.7058A4.87826,4.87826,0,0,1,298.50776,546.13086Z" transform="translate(-177.66231 -152.36922)" fill="#3f3d56"/><path d="M319.35062,518.94278a10.06358,10.06358,0,0,0-15.517-4.46026l-29.77845-19.75406-.05061,18.56963L302.2904,529.21a10.111,10.111,0,0,0,17.06022-10.26718Z" transform="translate(-177.66231 -152.36922)" fill="#ffb8b8"/><path d="M281.7006,523.11883l-24.33677-19.27776a17.16326,17.16326,0,0,1-7.82343-27.13518l22.09715-28.95951a10.096,10.096,0,0,1,17.1296,10.28435l-17.48384,28.6,25.694,12.18686a4.67363,4.67363,0,0,1,1.94814,6.71958l-10.37175,16.41406a4.682,4.682,0,0,1-3.16671,2.1111c-.02565.00448-.05149.00846-.0773.0123A4.69555,4.69555,0,0,1,281.7006,523.11883Z" transform="translate(-177.66231 -152.36922)" fill="#ccc"/><path d="M287.84537,418.57447a2.13479,2.13479,0,0,1,1.85636-2.81905,4.93046,4.93046,0,0,1,3.4761,1.71495,13.8334,13.8334,0,0,0,3.07115,2.63711c1.18812.59889,2.79953.51354,3.47685-.62824.63605-1.07221.20023-2.508-.18482-3.75347a36.90711,36.90711,0,0,1-1.62991-9.77c-.11092-3.70032.41115-7.562,2.45972-10.44807,2.64387-3.72475,7.37142-5.13883,11.84544-5.0363s8.87547,1.48362,13.30713,2.35665c1.52992.30139,3.32826.4555,4.35153-.73025,1.08805-1.26082.68844-3.3014.22563-5.00376-1.20094-4.41743-2.475-8.98461-5.26525-12.55224a18.89839,18.89839,0,0,0-12.06081-6.79014,28.93848,28.93848,0,0,0-13.46236,1.52838,36.09628,36.09628,0,0,0-17.68285,12.3186,29.23592,29.23592,0,0,0-5.57809,21.60019,26.66712,26.66712,0,0,0,9.88579,16.85462Z" transform="translate(-177.66231 -152.36922)" fill="#2f2e41"/><path d="M598.92043,735.14922a45.99375,45.99375,0,0,1-17.07033-71.4888,45.99715,45.99715,0,1,0,62.56892,66.464A45.96919,45.96919,0,0,1,598.92043,735.14922Z" transform="translate(-177.66231 -152.36922)" fill="#3f3d56"/></svg>
#

"""## Styles"""

# Commented out IPython magic to ensure Python compatibility.
#Make the template.
# %mkdir static/styles/ -p

"""### Common"""

# Commented out IPython magic to ensure Python compatibility.
# #create the landing page styles
# %%writefile static/styles/common.css
# 
# * {
#   box-sizing: border-box;
#   font-family: 'Montserrat', sans-serif;
# }
# 
# .navbar-brand {
#   font-weight: 700;
# }
# 
# .bg-image {
#   width: 100%;
#   height: 300px;
#   display: flex;
#   background-size: 100%, cover;
#   background-position: center center;
#   position: relative;
# }
# 
# .bg-image-overlay {
#   width: 100%;
#   height: 300px;
#   display: flex;
#   background-color: rgba(52, 58, 64, 0.8);
#   justify-content: center;
#   align-items: center;
# }
# 
# .bg-image-cont {
#   padding: 20px;
#   max-width: 1280px;
#   margin: 0 auto;
# }
# 
# .bg-image-cont-text {
#   max-width: 700px;
#   z-index: 100;
#   position: absolute;
#   bottom: 40px;
#   margin-right: 20px;
#   min-height: 100px;
#   color: #fff;
# 
#   @media screen and (max-width: 720px) {
#        max-width: 100%;
#   }
# }
# 
# .bg-image-cont-text h1 { 
#   font-size: 2.4rem;
#   @media screen and (max-width: 720px) {
#     font-size: 1.5rem;
#   }
# }
# 
# .bg-image-cont-text p { 
#   font-size: 1.2rem;
#   @media screen and (max-width: 720px) {
#       font-size: 1rem;
#   }
# }
# 
# .content-container {
#   display: flex;
#   flex-direction: column;
#   padding: 50px;
#   align-items: center;
# }
# 
# 
# .content {
#   max-width: 1280px;
#   width: 100%;
#   display: flex;
#   flex-direction: column;
# }
# 
# h1 {
#   font-weight: 500;
#   font-size: 2rem;
#   font-family: 'Montserrat', sans-serif;
#   @media screen and (max-width: 720px) {
#     font-size: 1.5rem;
#   }
# }
# 
# .section-container {
#   padding-top: 40px;
#   padding-bottom: 40px;
# }
# 
# .wide-container-bg {
#   background-color: #F3F4FB;
# }
# 
# 
# .submit-btn {
#   background: #1F95FA;
#   border-radius: 60px;
#   padding: 8px 75px;
#   color: #fff;
#   font-size: 16px;
#   border: none;
# }
# 
# 
# 
# /* SEARCH FORM */
# 
# .input-group {
#     padding-top: 20px;
# }
# 
# .search-bar {
#     padding: 20px;
# }
# 
# .search-input-cont {
#     padding-right: 8px;
#     width: 600px; 
# }
# 
# .search-input {
#     border-radius: 60px;
# }
# 
# .form-container {
#      padding-top: 50px;
# }
# 
# .fa-search {
#     padding-right: 10px;
# }
# 
# 
# .no-results {
#     color: red;
#     font-size: 14px;
#     padding: 8px;
# }
# 
#

"""### Index"""

# Commented out IPython magic to ensure Python compatibility.
# #create the landing page styles
# %%writefile static/styles/index.css
# 
# 
# /* SEARCH FORM */
# 
# .search-bar {
#     padding: 20px;
# }
# 
# .search-input {
#     padding-right: 8px;
# }
# 
# . form-container {
#      padding-top: 50px;
# }
# 
# 
# /* POPULAR MOVIES */
# .popular-container {
#   display: flex;
#   flex-wrap: wrap;
#   width: 100%;
#   justify-content: flex-start;
# }
# 
# .popular-title {
#   padding-top: 50px;
# }
# 
# .movie-img {
#   width: 150px;
#   height: 200px;
#   background-size: 100%, cover;
#   background-position: center center;
#   position: relative;
#   border-radius: 30px;
#   display: flex;
#   align-items: flex-end;
#   justify-items: flex-end;
#   margin: 20px 20px 20px 0;
# }
# 
# .movie-img:hover {
#     opacity: .5;
# }
#

"""### Login"""

# Commented out IPython magic to ensure Python compatibility.
# #create the landing page styles
# %%writefile static/styles/login.css
# 
# 
# .bg-image {
#     background: linear-gradient(
#         to bottom, rgba(0,0,0,0)
#         41%, rgba(0,0,0,0.65)
#         100%
#     ),
#     url("http://image.tmdb.org/t/p/w1280/hZkgoQYus5vegHoetLkCJzb17zJ.jpg"), #030303;
#     background-size: 100%, cover;
#     background-position: center;
#     height: calc(100vh - 56px);
#     position: relative;
# }
# 
# .form-content {
#     padding: 20px;
#     max-width: 1280px;
#     margin: 0 auto;
#     display: flex;
#     justify-content: center;
# }
# 
# .blurred-bg {
#     background: rgba(0, 0, 0, 0.8);
#     padding: 100px 0 200px 0;
#     width: 600px;
#     height: auto;
#     display: flex;
#     align-items: center;
#     flex-direction: column;
# }
# 
# form {
#     width: 300px;
# }
# 
# form label {
#     color: #fff;
#     padding-top: 16px;
# }
# 
# .form-content h1{
#     color: #fff;
#     padding-bottom: 30px;
#     font-size: 3rem;
# }
# 
# form input {
#     width: 100%;
# }
# 
# 
# .bg-image-cont-text h1 { 
#     font-size: 2.4rem;
#     @media screen and (max-width: 720px) {
#       font-size: 1.5rem;
#     }
# }
# 
# .bg-image-cont-text p { 
#     font-size: 1.2rem;
#     @media screen and (max-width: 720px) {
#         font-size: 1rem;
#     }
# }
# 
# .error-msg {
#     color: #fff;
# }
# 
#

"""### About"""

# Commented out IPython magic to ensure Python compatibility.
# #create the landing page styles
# %%writefile static/styles/about.css
# 
#   
#   body {
#     margin: 0;
#   }
#   
#   /* Create four equal columns that floats next to each other */
#   .column {
#     float: left;
#     width: 25%;
#     padding: 15px;
#   }
# 
#   .row {
#       padding-top: 20px;
#   }
#   
#   /* Clear floats after the columns */
#   .row:after {
#     content: "";
#     display: table;
#     clear: both;
#   }
#   
#   /* Responsive layout - makes the four columns stack on top of each other instead of next to each other */
#   @media screen and (max-width:600px) {
#     .column {
#       width: 100%;
#     }
#   }
# 
#   p {
#     font-size: 18px;
#   }
# 
# 
#   .round-img {
#     border-radius: 100px;
#   }
# 
#   .team-member h4 {
#       font-size: 20px;
#       font-weight: bold;
#       padding-top: 10px;
#   }
# 
#   .team-member p {
#     margin: 0;
#     font-size: 16px;
# }
#

"""### Help styles"""

# Commented out IPython magic to ensure Python compatibility.
# #create the landing page styles
# %%writefile static/styles/help.css
# 
# .form-container {
#   display: flex;
#   width: 100%;
#   max-width: 800px;
# }
# 
# .form-left {
#   background-color: #1F95FA;
#   color: #fff;
#   width: 50%;
#   padding: 30px;
#   border-radius: 20px 0 0 20px;
# }
# 
# .form-right {
#   width: 50%;
#   padding: 30px;
#   background-color: #fff;
#   border-radius: 0 20px 20px 0;
# }
# 
# .gray-container {
#   background-color: #F3F4FB;
#   width: 100%;
#   height: calc(100vh -320px);
# }
# 
# .quest-img {
#   width: 200px;
#   height:200px;
# }
# 
# .input-text {
#   width: 100%;
#   height: 30px;
#   margin-bottom: 20px;
#   padding: 8px 20px;
#   border: none;
#   background-color: #F3F4FB;
#   border-radius: 10px;
# }
# 
# .input-text-long {
#   width: 100%;
#   margin-bottom: 20px;
#   padding: 8px 20px;
#   border: none;
#   background-color: #F3F4FB;
#   border-radius: 10px;
# }
# 
# .submit-btn {
#   background: #1F95FA;
#   border-radius: 60px;
#   padding: 8px 75px;
#   color: #fff;
#   font-size: 16px;
#   border: none;
# }
#

"""### Details styles"""

# Commented out IPython magic to ensure Python compatibility.
# #create the details page styles
# %%writefile static/styles/details.css
# 
# 
# /* MOVIE */
# 
# .movie-continer {
#   width: 100%;
#   height: 450px;
#   display: flex;
#   background-size: 100%, cover;
#   background-position: center center;
#   position: relative;
# }
# 
# .movie-overlay {
#   width: 100%;
#   height: 450px;
#   display: flex;
#   background-color: rgba(52, 58, 64, 0.8);
#   justify-content: center;
#   align-items: center;
# }
# 
# .movie-card {
#   width: 100%;
#   max-width: 1140px;
#   height: 300px;
#   display: flex;
# 
# }
# 
# .movie-img {
#   height: 300px;
#   width: 220px;
#   background-size: 100%, cover;
#   background-position: center center;
#   position: relative;
# }
# 
# .movie-text {
#   height: 300px;
#   width: 80%;
#   background-color: #343A40;
#   color: #fff;
#   padding: 20px;
# }
# 
# .star-img {
#   width: 16px;
#   height: 16px;
#   margin-right: 10px;
# }
# 
# .rating {
#   font-size: 18px;
#   font-weight: bold;
#   margin-right: 5px;
# }
# 
# .ten {
#   font-size: 12px;
#   font-weight: 300;
#   margin-right: 10px;
# }
# 
# .rating-row {
#   display: flex;
#   align-items: center;
# }
# 
# .movie-title {
#   font-size: 24px;
#   font-weight: bold;
# }
# 
# .time-row {
#   display: flex;
#   align-items: center;
# }
# 
# .clock-img {
#   width: 16px;
#   height: 16px;
#   margin-right: 10px;
# }
# 
# .time-row span {
#   font-size: 14px;
#   margin-right: 10px;
# }
# 
# .genre-tag {
#   background: #1F95FA;
#   border-radius: 60px;
#   padding: 3px 20px;
#   color: #fff;
#   font-size: 14px;
#   border: none;
# }
# 
# .genre-row {
#   display: flex;
#   align-items: center;
#   margin-top: 8px;
# }
# 
# .genre-row span {
#   font-size: 14px;
#   margin-right: 10px;
# }
# 
# .movie-overview {
#   font-size: 16px;
#   margin-top: 20px;
# }
# 
# .movie-lang {
#   text-transform: uppercase;
# }
# 
# 
# 
# /* CAST */
# .cast-container {
#   display: flex;
#   flex-wrap: wrap;
#   width: 100%;
#   justify-content: flex-start;
# }
# 
# .cast-title {
#   padding-top: 50px;
# }
# 
# .actor-container {
#   width: 150px;
#   height: 200px;
#   background-size: 100%, cover;
#   background-position: center center;
#   position: relative;
#   border-radius: 30px;
#   display: flex;
#   align-items: flex-end;
#   justify-items: flex-end;
#   margin: 20px 20px 20px 0;
# }
# 
# 
# .cast-text {
#   padding: 15px;
#   color: #fff;
#   width: 100%;
#   background: linear-gradient(180deg, rgba(127, 134, 158, 0) 0%, rgba(102, 108, 131, 0.68) 53.12%, #343A40 94.27%);
#   border-radius: 0 0 30px 30px;
# }
# 
# .actor-name {
#   font-size: 14px;
#   font-weight: bold;
# }
# 
# .actor-character {
#   font-size: 12px;
# }
# 
# 
# #CSS for RECOMENDATION
# .recomendation1-container {
#   display: flex;
#   flex-wrap: wrap;
#   width: 100%;
#   justify-content: space-between;
# }
# 
# .recomendation-title {
#   padding-top: 50px;
# }
# 
# .recomendation2-container {
#   width: 150px;
#   height: 200px;
#   background-size: 100%, cover;
#   background-position: center center;
#   position: relative;
#   border-radius: 30px;
#   display: flex;
#   align-items: flex-end;
#   justify-items: flex-end;
#   margin: 20px 20px 20px 0;
# }
# 
# 
# /* RECOMMENDED MOVIES */
# .recommendations-container {
#   display: flex;
#   flex-wrap: wrap;
#   width: 100%;
#   justify-content: flex-start;
# }
# 
# .recommendations-title {
#   padding-top: 50px;
# }
# 
# .rec-movie-img {
#   width: 150px;
#   height: 200px;
#   background-size: 100%, cover;
#   background-position: center center;
#   position: relative;
#   border-radius: 30px;
#   display: flex;
#   align-items: flex-end;
#   justify-items: flex-end;
#   margin: 20px 20px 20px 0;
# }
# 
# .rec-movie-img:hover {
#     opacity: .5;
# }

"""## Html

### Login landing
"""

# Commented out IPython magic to ensure Python compatibility.
# #create the landing page
# 
# %%writefile templates/index.html
# <!DOCTYPE html>
# <html>
# <head>
# <title>Moviefy</title>
#  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
#  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
#  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
#  <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/common.css') }}">
#  <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/login.css') }}">
# </head>
# </head>
# <body>
# <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
#   <a class="navbar-brand" href="/">Moviefy</a>
#   <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
#     <span class="navbar-toggler-icon"></span>
#   </button>
#   <div class="collapse navbar-collapse" id="navbarNav">
#     <ul class="navbar-nav">
#       <li class="nav-item active">
#         <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
#       </li>
#       <li class="nav-item">
#         <a class="nav-link" href="/about">About</a>
#       </li>
#       <li class="nav-item">
#         <a class="nav-link" href="/help">Help</a>
#       </li>
#     </ul>
#   </div>
# </nav>
# <div class="bg-image">
#     <div class="form-content">
#       <div class="blurred-bg">
#         <div>
#           <form action="/home" method=post>
#             <h1>Sign in</h1>
#             <label>Username</label><br>
#             <input type="text" name="uname"><br>
#             <label>Password</label><br>
#             <input type="password" name="pwd"><br><br>
#             <input class="submit-btn" type="submit" value="Submit">
#           </form>
#         </div>
#         <div>
#         <p class="error-msg">{{message}}</p> 
#         </div>
#       </div> 
#     </div>
# </div>
# 
# </body>
# </html>

"""### Home (Logged in)"""

# Commented out IPython magic to ensure Python compatibility.
# #create the landing page
# 
# %%writefile templates/home.html
# <!DOCTYPE html>
# <html>
# <head>
# <title>Moviefy</title>
#   <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
#  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
#  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
#  <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/common.css') }}">
#  <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/index.css') }}">
# </head>
# </head>
# <body>
# <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
#   <a class="navbar-brand" href="/">Moviefy</a>
#   <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
#     <span class="navbar-toggler-icon"></span>
#   </button>
#   <div class="collapse navbar-collapse" id="navbarNav">
#     <ul class="navbar-nav">
#       <li class="nav-item active">
#         <a class="nav-link" href="/home2">Home <span class="sr-only">(current)</span></a>
#       </li>
#       <li class="nav-item">
#         <a class="nav-link" href="/about">About</a>
#       </li>
#       <li class="nav-item">
#         <a class="nav-link" href="/help">Help</a>
#       </li>
#     </ul>
#   </div>
# </nav>
# <div class="bg-image"  style="background-image:url('{{upcomingMovieImage}}')"> 
#   <div class="bg-image-overlay">
#     <div class="container">
#         <div class="bg-image-cont-text">
#           <h1>Welcome {{uname}}, here are the current popular movies</h1>
#         </div>
#     </div>
#   </div>
# </div>
# <div class="container">
#   <form action="/searchresults" method=post>
#     <div class="form-container">
#       <h1 class="search-title"> Search your movie </h1>
#         <div class="input-group">
#           <div class="form-outline search-input-cont">
#             <input type="search" id="form1" name="searchtext" class="form-control search-input" />
#           </div>
#           <button class="btn btn-primary submit-btn" type="submit"><i class="fa fa-search"></i>Search</button>
#         </div>
#     </div>
#   </form>
# </div>
# <div class="container">
#   <h1 class="popular-title">Popular Movies</h1>
#   <div class="popular-container">
#    {% for x in popular["results"] %}   
#    <a id="{{x['id']}}" href="/details?id={{x['id']}}">
#     <div class="movie-img" style="background-image:url({{'http://image.tmdb.org/t/p/w1280'+x['poster_path']}})">
#     </div>
#    </a>
#     {% endfor %}
#   </div>
# </div>
# 
# </body>
# </html>

"""### Home2"""

# Commented out IPython magic to ensure Python compatibility.
# #create the landing page
# 
# %%writefile templates/home2.html
# <!DOCTYPE html>
# <html>
# <head>
# <title>Moviefy</title>
#   <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
#  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
#  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
#  <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/common.css') }}">
#  <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/index.css') }}">
# </head>
# </head>
# <body>
# <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
#   <a class="navbar-brand" href="/">Moviefy</a>
#   <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
#     <span class="navbar-toggler-icon"></span>
#   </button>
#   <div class="collapse navbar-collapse" id="navbarNav">
#     <ul class="navbar-nav">
#       <li class="nav-item active">
#         <a class="nav-link" href="/home2">Home <span class="sr-only">(current)</span></a>
#       </li>
#       <li class="nav-item">
#         <a class="nav-link" href="/about">About</a>
#       </li>
#       <li class="nav-item">
#         <a class="nav-link" href="/help">Help</a>
#       </li>
#     </ul>
#   </div>
# </nav>
# <div class="bg-image"  style="background-image:url('{{upcomingMovieImage}}')"> 
#   <div class="bg-image-overlay">
#     <div class="container">
#         <div class="bg-image-cont-text">
#           <h1>Welcome {{uname}}, here are the current popular movies</h1>
#         </div>
#     </div>
#   </div>
# </div>
# 
# <div class="container">
#   <form action="/searchresults" method=post>
#     <div class="form-container">
#       <h1 class="search-title"> Search your movie </h1>
#         <div class="input-group">
#           <div class="form-outline search-input-cont">
#             <input type="search" id="form1" name="searchtext" class="form-control search-input" />
#           </div>
#           <button class="btn btn-primary submit-btn" type="submit"><i class="fa fa-search"></i>Search</button>
#         </div>
#     </div>
#   </form>
# </div>
# 
# <div class="container">
#   <h1 class="popular-title">Popular Movies</h1>
#   <div class="popular-container">
#    {% for x in popular["results"] %}
#     <a id="{{x['id']}}" href="/details?id={{x['id']}}">
#       <div class="movie-img" style="background-image:url({{'http://image.tmdb.org/t/p/w1280'+x['poster_path']}})">
#       </div>
#     </a>
#     {% endfor %}
#   </div>
# </div>
# 
# </body>
# </html>

"""###About"""

# Commented out IPython magic to ensure Python compatibility.
# #recreate about page - Gil's block
# 
# %%writefile templates/about.html
# <!DOCTYPE html>
# <html>
# <head>
# <title>Moviefy</title>
# <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
#  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
#  <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/common.css') }}">
#  <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/about.css') }}">
# </head>
# </head>
# <body>
# <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
#   <a class="navbar-brand" href="/">Moviefy</a>
#   <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
#     <span class="navbar-toggler-icon"></span>
#   </button>
#   <div class="collapse navbar-collapse" id="navbarNav">
#     <ul class="navbar-nav">
#       <li class="nav-item">
#         <a class="nav-link" href="/home2">Home</a>
#       </li>
#       <li class="nav-item active">
#         <a class="nav-link" href="/about">About <span class="sr-only">(current)</span></a>
#       </li>
#       <li class="nav-item">
#         <a class="nav-link" href="/help">Help</a>
#       </li>
#     </ul>
#   </div>
# </nav>
# <div class="bg-image"  style="background-image:url('{{upcomingMovieImage}}')"> 
#   <div class="bg-image-overlay">
#     <div class="container">
#         <div class="bg-image-cont-text">
#           <h1>About us</h1>
#           <p>We are four NYU students </p>
#         </div>
#     </div>
#   </div>
# </div>
# <div class="container">
#     <div class="section-container">
#       <h1>Mission</h1>
#       <p>Movie Database is dedicated to providing you with reliable information about movies and helping you decide what to watch next. You can search any movie from any year and from any part of the world and we will provide you with information about it. Our site also features lists about movies currently in theaters, upcoming movie releases, and popular movies. You can also create your own lists of movies and we will provide you with a list of similar movies that you may be interested in.</p>
#     </div>
# </div>
# <div class="content-container wide-container-bg">
#   <div class="container section-container">
#     <h1>Team</h1>
#     <div class="row">
#       <div class="column team-member">
#         <div class="text-center">
#           <img class="round-img" src="https://media-exp1.licdn.com/dms/image/C4D03AQHR5sK5VMnfpA/profile-displayphoto-shrink_400_400/0/1633033617515?e=1643846400&v=beta&t=4Ubwd96_XUMP1W7TuPvi2TdTa2mGYTFIlCVlbJBDcTY" alt="Gilberto Garcia" style="width:128px;height:128px;">
#           <h4>Gilberto Garcia</h4>
#           <p>Favorite Movie: Life is Beautiful</p>
#           <p>Stern FT MBA</p>
#         </div>
#       </div>
#       <div class="column team-member">
#         <div class="text-center">
#           <img class="round-img" src="https://media-exp1.licdn.com/dms/image/C4D03AQEjzn1qTXamcw/profile-displayphoto-shrink_800_800/0/1570543302064?e=1643846400&v=beta&t=hyl7cfibbxORSeNshhXdCbj6sUqHB2B7rArbUtDnyoY" alt="Gilberto Garcia" style="width:128px;height:128px;">
#           <h4>Modiha Bhatti</h4>
#           <p>Favorite Movie: Back to the Future</p>
#           <p>Stern Langone PT MBA</p>
#         </div>
#       </div>
#       
#       <div class="column team-member">
#         <div class="text-center">
#           <img class="round-img" src="https://media-exp1.licdn.com/dms/image/C4D03AQEEtzZEVE2YFw/profile-displayphoto-shrink_800_800/0/1529688543634?e=1643846400&v=beta&t=2PVOXVfzEqOVu3DR-8CFNMagROV7im5KsqnyV8UAbrg" alt="Gilberto Garcia" style="width:128px;height:128px;">
#           <h4>Daniel Perpalaj</h4>
#           <p>Favorite Movie: James Bond</p>
#           <p>Stern Langone PT MBA</p>
#         </div>
#       </div>
#     
#       <div class="column team-member">
#         <div class="text-center">
#           <img class="round-img"  src="https://media-exp1.licdn.com/dms/image/C4D03AQFRCElW-jwASw/profile-displayphoto-shrink_800_800/0/1628866861444?e=1643846400&v=beta&t=uuACYKbNCEcC7A5fGqJXfmZlQAODCwLJJS1O-P3aCAw" alt="Gilberto Garcia" style="width:128px;height:128px;">
#           <h4>Beatriz Fuster</h4>
#           <p>Favorite Movie: Gladiator</p>
#           <p>Stern Tech MBA</p>
#         </div>
#       </div>
#     </div>
# </div>
# 
# 
# </body>
# </html>

"""### Help"""

# Commented out IPython magic to ensure Python compatibility.
# #recreate help page
# %%writefile templates/help.html
# <!DOCTYPE html>
# <html>
# <head>
# <title>Moviefy</title>
#  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
#   <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
#    <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/common.css') }}">
#     <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/help.css') }}">
# </head>
# </head>
# <body>
# <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
#   <a class="navbar-brand" href="/">Moviefy</a>
#   <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
#     <span class="navbar-toggler-icon"></span>
#   </button>
#   <div class="collapse navbar-collapse" id="navbarNav">
#     <ul class="navbar-nav">
#       <li class="nav-item">
#         <a class="nav-link" href="/home2">Home</a>
#       </li>
#       <li class="nav-item">
#         <a class="nav-link" href="/about">About</a>
#       </li>
#       <li class="nav-item active">
#         <a class="nav-link" href="/help">Help <span class="sr-only">(current)</span></a>
#       </li>
#     </ul>
#   </div>
# </nav>
#   <div class="bg-image"  style="background-image:url('{{upcomingMovieImage}}')"> 
#     <div class="bg-image-overlay">
#       <div class="container">
#           <div class="bg-image-cont-text">
#               <h1>Do you need help?</h1>
#             <p>Check our FAQ or Contact us</p>
#           </div>
#       </div>
#     </div>
#   </div>
#   <div class="gray-container">
#      <div class="container">
#         <div class="section-container">
#             <div class="form-container">
#                 <div class="form-left">
#                     <h1>Contact Us</h1>
#                     <p>We are here to help.</p>
#                     <img class="quest-img" src="../static/img/quest.svg" alt="Question">
#                 </div>
#                 <div class="form-right">  
#                     <form action="https://formsubmit.co/86997e41b14757734996940b391a4f3f" method="POST">
#                         <div>
#                             <input class="input-text" type="text" name="Name" placeholder="Name"> 
#                         </div>
#                         <div>
#                             <input class="input-text" type="text" name="Email" placeholder="Email"required> 
#                             
#                         </div>
#                         <div>
#                             <textarea rows="4" cols="50" class="input-text-long" type="text" name="Message"  placeholder="Message"></textarea> 
#                         </div>
#                         <input class="submit-btn" type="submit" name= "form" value="Submit" />
#                         <input type="hidden" name="_next" value="https://ixf61ascw2o-496ff2e9c6d22116-5000-colab.googleusercontent.com/thankyou">
#                         </form>
#                 </div>
#             </div>
#         </div>
#     </div>
#   </div>
# </body>
# </html>

"""### Details"""

# Commented out IPython magic to ensure Python compatibility.
# #create the landing page
# 
# %%writefile templates/details.html
# <!DOCTYPE html>
# <html>
# <head>
# <title>Moviefy</title>
#   <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
#  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
#  <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/common.css') }}">
#  <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/details.css') }}">
# </head>
# </head>
# <body>
# <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
#   <a class="navbar-brand" href="/">Moviefy</a>
#   <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
#     <span class="navbar-toggler-icon"></span>
#   </button>
#   <div class="collapse navbar-collapse" id="navbarNav">
#     <ul class="navbar-nav">
#       <li class="nav-item">
#         <a class="nav-link" href="/home2">Home</a>
#       </li>
#       <li class="nav-item">
#         <a class="nav-link" href="/about">About</a>
#       </li>
#       <li class="nav-item">
#         <a class="nav-link" href="/help">Help</a>
#       </li>
#     </ul>
#   </div>
# </nav>
# <div class="movie-continer" style="background-image:url('http://image.tmdb.org/t/p/w1280/{{movie.backdrop_path}}')">
#     <div class="movie-overlay">
#       <div class="movie-card">
#         <div class="movie-img" style="background-image:url('http://image.tmdb.org/t/p/w1280{{movie.poster_path}}')"></div>
#         <div class="movie-text">
#           <div class="rating-row">
#             <img class="star-img" src="../static/img/star.svg" alt="Star">
#             <span class="rating">{{ movie.vote_average }}</span><span class="ten">/10</span>
#             <span class="ten">({{ movie.vote_count }}) reviews</span>
#           </div>
#           <div class="movie-title">{{ movie.title }}</div>
#           <div class="time-row">
#             <img class="clock-img" src="../static/img/clock.svg" alt="clock">
#             <span>{{ movie.runtime }} min</span>
#             <span>{{ movie.release_date }} - {{director}}</span>
#           </div>
#           <div class="genre-row">
#             {% for genre in movie.genres %}  
#               <span class="genre-tag">{{genre.name}}</span>
#             {% endfor %}
#             {% if movie.adult is sameas true %}
#               <span>Adult</span>
#             {% endif %}
#             <span class="movie-lang">{{ movie.original_language }}</span>
#           </div>
#           <div class="movie-overview">
#           {{ movie.overview }}
#           </div>
# 
#         </div>
# 
#       </div>
#     </div>
# </div>
# <div class="container">
#   <h1 class="cast-title">Cast</h1>
#   <div class="cast-container">
#    {% for actor in cast %}   
#     <div class="actor-container" style="background-image:url({{ actor.image }})">
#       <div class= "cast-text">
#         <div class="actor-name">
#           {{ actor.name }}
#         </div>
#         <div class="actor-character">
#           {{ actor.character }}
#         </div>
#       </div>
#     </div>
#     {% endfor %}
#   </div>
# </div>
# <div class="container">
#   <h1 class="recommendations-title">More like this</h1>
#   <div class="recommendations-container">
#    {% for recomendation in recomendations %}
#       <a id="{{recomendation['id']}}" href="/details?id={{recomendation['id']}}">
#         <div class="rec-movie-img" style="background-image:url({{ recomendation.image }})">
#         </div>
#       </a>
#     {% endfor %}
#   </div>
# </div>
# 
# 
# </body>
# </html>

"""### Search Results"""

# Commented out IPython magic to ensure Python compatibility.
# #create the Search results page
# %%writefile templates/searchresults.html
# <!DOCTYPE html>
# <html>
# <head>
# <title>Moviefy</title>
#   <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
#  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
#  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
#  <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/common.css') }}">
#  <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/index.css') }}">
# </head>
# <body>
# <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
#   <a class="navbar-brand" href="/">Moviefy</a>
#   <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
#     <span class="navbar-toggler-icon"></span>
#   </button>
#   <div class="collapse navbar-collapse" id="navbarNav">
#     <ul class="navbar-nav">
#       <li class="nav-item">
#         <a class="nav-link" href="/home2">Home</a>
#       </li>
#       <li class="nav-item">
#         <a class="nav-link" href="/about">About</a>
#       </li>
#       <li class="nav-item">
#         <a class="nav-link" href="/help">Help</a>
#       </li>
#     </ul>
#   </div>
# </nav>
# <div class="bg-image"  style="background-image:url('{{upcomingMovieImage}}')"> 
#   <div class="bg-image-overlay">
#     <div class="container">
#         <div class="bg-image-cont-text">
#             <h1>Here are your search results</h1>
#         </div>
#     </div>
#   </div>
# </div>
# <div class="container">
#   <form action="/searchresults" method=post>
#     <div class="form-container">
#       <h1 class="search-title"> Search your movie </h1>
#         <div class="input-group">
#           <div class="form-outline search-input-cont">
#             <input type="search" id="form1" name="searchtext" class="form-control search-input" />
#           </div>
#           <button class="btn btn-primary submit-btn" type="submit"><i class="fa fa-search"></i>Search</button>
#         </div>
#     </div>
#   </form>
# </div>
# <div class="container">
#   {% if search["results"] is defined and search["results"]|length %}
#        <h1 class="popular-title">Here are your search results</h1>
#   {% else %}
#        <div class="no-results">No results found, please try a new search.</div>
#   {% endif %}
#   <div class="popular-container">
#     {% for result in search["results"] %}
#       {% if result['poster_path'] is defined and result['poster_path'] is not none%}
#         <a id="{{result['id']}}" href="/details?id={{result['id']}}">
#             <div class="movie-img" style="background-image:url({{'http://image.tmdb.org/t/p/w1280'+result['poster_path']}})">
#             </div>
#         </a>
#       {% endif %}
#     {% endfor %}
#   </div>
# </div>
# 
# <div class="container">
#   <h1 class="popular-title">Popular Movies</h1>
#   <div class="popular-container">
#    {% for pop_movie in popular["results"] %} 
#     {% if pop_movie['poster_path'] is defined and pop_movie['poster_path'] is not none%}  
#       <a id="{{pop_movie['id']}}" href="/details?id={{pop_movie['id']}}">
#         <div class="movie-img" style="background-image:url({{'http://image.tmdb.org/t/p/w1280'+pop_movie['poster_path']}})">
#         </div>
#        </a>
#      {% endif %}
#     {% endfor %}
#   </div>
# </div>
# </body>
# </html>

"""###Thank You"""

# Commented out IPython magic to ensure Python compatibility.
# #recreate thank you page
# %%writefile templates/thankyou.html
# <!DOCTYPE html>
# <html>
# <head>
# <title>Moviefy</title>
#  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
#   <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
#    <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/common.css') }}">
#     <link rel="stylesheet" href= "{{ url_for('static',filename='/styles/help.css') }}">
# </head>
# </head>
# <body>
# <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
#   <a class="navbar-brand" href="/">Moviefy</a>
#   <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
#     <span class="navbar-toggler-icon"></span>
#   </button>
#   <div class="collapse navbar-collapse" id="navbarNav">
#     <ul class="navbar-nav">
#       <li class="nav-item">
#         <a class="nav-link" href="/home">Home</a>
#       </li>
#       <li class="nav-item">
#         <a class="nav-link" href="/about">About</a>
#       </li>
#       <li class="nav-item active">
#         <a class="nav-link" href="/help">Help <span class="sr-only">(current)</span></a>
#       </li>
#     </ul>
#   </div>
# </nav>
# <div class="bg-image"  style="background-image:url('{{upcomingMovieImage}}')"> 
#   <div class="bg-image-overlay">
#     <div class="container">
#         <div class="bg-image-cont-text">
#             <h1>Thank you for your submission!</h1>
#         <p>Someone from the team should be getting back to you shortly.</p>
#         </div>
#     </div>
#   </div>
# </div>
#     <div class="content-container">
#         <div class="content section-container">
#             <div class="form-container">
#                 <div class="form-left">
#                     <h1>Contact Us</h1>
#                     <p>We are here to help.</p>
#                     <img class="quest-img" src="../static/img/quest.svg" alt="Question">
#                 </div>
#                 <div class="form-right">
#                     
#                     <form action="https://formsubmit.co/dp2466@nyu.edu" method="POST">
#                         <div>
#                             <input class="input-text" type="text" name="Name" placeholder="Name"> 
#                         </div>
#                         <div>
#                             <input class="input-text" type="text" name="Email" placeholder="Email"required> 
#                             
#                         </div>
#                         <div>
#                             <textarea rows="4" cols="50" class="input-text-long" type="text" name="Message"  placeholder="Message"></textarea> 
#                         </div>
#                         <input class="submit-btn" type="submit" name= "form" value="Submit" />
#                         <input type="hidden" name="_next" value="https://ixf61ascw2o-496ff2e9c6d22116-5000-colab.googleusercontent.com/thankyou">
#                         </form>
#                 </div>
#             </div>
#         </div>
#     </div>
# </body>
# </html>

"""## PyMySQL"""

!pip install PyMySQL

from flask import Flask, render_template, request
import hashlib, binascii, os
import pymysql.cursors
import pymysql
import requests
app = Flask(__name__)

API_URL = 'https://api.themoviedb.org/3/'
parameters = {
    #'api_key' : '808d1b8949e44f23c5ac6deff2f0c659' #note this is Beatriz's API Key
    'api_key' : '958d6a238d66dda8180dfee9d3fd03ef' #note this is Gil's API Key
      #'api_key' : 'b9d30188a6811ff30acdcf08f8ce5afd' #note this is Mo's API Key
}

upcoming_url = API_URL + "movie/upcoming"

upcoming_resp = requests.get(upcoming_url, params=parameters)
upcomingData = upcoming_resp.json()
upcomingImageUrl = upcomingData["results"][0]["backdrop_path"]

uname=""

if(upcomingImageUrl is not None):
  upcomingMovieImage = "http://image.tmdb.org/t/p/w1280/" + upcomingImageUrl
else:
  upcomingMovieImage = "http://image.tmdb.org/t/p/w1280/hZkgoQYus5vegHoetLkCJzb17zJ.jpg"

##Add the hashing code functions before the your @#app.route()

def hash_password(password):
    """Hash a password for storing."""
    salt = hashlib.sha256(os.urandom(60)).hexdigest().encode('ascii')
    pwdhash = hashlib.pbkdf2_hmac('sha512', password.encode('utf-8'), 
                                salt, 100000)
    pwdhash = binascii.hexlify(pwdhash)
    return (salt + pwdhash).decode('ascii')

def verify_password(stored_password, provided_password): 
    """Verify a stored password against one provided by user"""
    salt = stored_password[:64]
    stored_password = stored_password[64:]
    pwdhash = hashlib.pbkdf2_hmac('sha512', 
                                  provided_password.encode('utf-8'), 
                                  salt.encode('ascii'), 
                                  100000)
    pwdhash = binascii.hexlify(pwdhash).decode('ascii')
    return pwdhash == stored_password    

#Define the homepage and pass in some data such as username
@app.route("/")
def index():
    return render_template("index.html", message="", uname="", upcomingMovieImage=upcomingMovieImage)
    #return render_template("index.html", username="Kristen Sosulski", data=data)

#Define the about page
@app.route('/about')
def about():
    return render_template("about.html", upcomingMovieImage=upcomingMovieImage)

#Define the help page
@app.route('/help')
def help():
    return render_template("help.html", upcomingMovieImage=upcomingMovieImage)

#Define the thank you page
@app.route('/thankyou')
def thankyou():
    return render_template("thankyou.html", upcomingMovieImage=upcomingMovieImage)

@app.route('/details')
def details():
  
    #movie_id = requests.get(id)
    movie_id = request.args.get('id')
    movie_url = API_URL + "movie/"+ movie_id
    movie_resp = requests.get(movie_url, params=parameters)
    movieData = movie_resp.json()

    

    credit_url = API_URL + "movie/"+ movie_id + "/credits"

    creditMovie_resp = requests.get(credit_url, params=parameters)
    creditMovieData = creditMovie_resp.json()

    cast = []
    for actor in creditMovieData["cast"]:
      if actor["known_for_department"] == "Acting":
        name = actor["name"]
        character = actor["character"]
        if actor["profile_path"]:
          image = "http://image.tmdb.org/t/p/w1280/" + actor["profile_path"]
          actor_obj = {
              "name": name,
              "character": character,
              "image" : image
          }
          cast.append(actor_obj)
    
    director = ""
    for actor in creditMovieData["crew"]:
      if actor["job"] == "Director":
        director = actor["name"]
        break

    recomendation_url = API_URL + "movie/"+ movie_id + "/recommendations" 

    recomendation_resp = requests.get(recomendation_url, params=parameters)
    recomendationData = recomendation_resp.json()
    print(recomendationData)

    recomendations = []
    for recomendation in recomendationData["results"]:
      name = recomendation["original_title"]
      image = "http://image.tmdb.org/t/p/w1280/" + recomendation["poster_path"]
      id = recomendation["id"]
      recomendation_obj = {
      "name": name,
      "image" : image,
      "id" : id
      }
      recomendations.append(recomendation_obj)


    return render_template("details.html", cast=cast, movie=movieData, director=director, recomendations=recomendations)

@app.route("/home", methods=["POST"])
def home(): ## Need to now establish sessions in the future.
    uname = request.form.get('uname')
    pwd = request.form.get('pwd')  
    connection = pymysql.connect(host='35.199.48.91',
                             user='pythonstudent',
                             password='student',
                             db='techub',
                             charset='utf8mb4',
                             cursorclass=pymysql.cursors.DictCursor)

    cursor = connection.cursor()    

    query = "SELECT Password FROM userstable WHERE UserName = %s"
    cursor.execute(query, (uname,))
    usersquery=cursor.fetchall()
    cursor.close()    
    message ="No data"

    moviepopular_url = "https://api.themoviedb.org/3/movie/popular?api_key=958d6a238d66dda8180dfee9d3fd03ef&language=en-US&page=1"
    popularresp = requests.get(moviepopular_url)
    popular = popularresp.json()

    for i in usersquery:
      if (verify_password(usersquery[0]['Password'], pwd)==True):
        return render_template('home.html', uname=uname, popular=popular, upcomingMovieImage=upcomingMovieImage) 
      else:
        message = "Your username or password is incorrect"
        return render_template('index.html', message=message)

#Define the home2 page
@app.route('/home2')
def home2():

    moviepopular_url = "https://api.themoviedb.org/3/movie/popular?api_key=958d6a238d66dda8180dfee9d3fd03ef&language=en-US&page=1"
    popularresp = requests.get(moviepopular_url)
    popular = popularresp.json()

    return render_template("home2.html", popular=popular, uname=uname, upcomingMovieImage=upcomingMovieImage)

@app.route("/searchresults", methods=["POST"])
def searchresults():

    moviepopular_url = "https://api.themoviedb.org/3/movie/popular?api_key=958d6a238d66dda8180dfee9d3fd03ef&language=en-US&page=1"
    popularresp = requests.get(moviepopular_url)
    popular = popularresp.json()

    searchtext = request.form.get('searchtext')

    moviesearch_url = "https://api.themoviedb.org/3/search/movie?api_key=958d6a238d66dda8180dfee9d3fd03ef&language=en-US&page=1&include_adult=false"+"&query="+searchtext
    searchresp = requests.get(moviesearch_url)
    search = searchresp.json()

    print("THIS IS MY SEARCHHHHH", search)

    return render_template('searchresults.html', search=search, popular=popular,upcomingMovieImage=upcomingMovieImage)

if __name__ == "__main__":
    app.run()